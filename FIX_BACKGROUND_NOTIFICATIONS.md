# ๐ ุฅุตูุงุญ ุงูุฅุดุนุงุฑุงุช ุนูุฏ ุฅุบูุงู ุงูุชุทุจูู

## ๐ ุงููุดููุฉ

ุงูุฅุดุนุงุฑุงุช **ุชุนูู** ุนูุฏูุง ุงูุชุทุจูู ููุชูุญุ ููู **ูุง ุชุธูุฑ** ุนูุฏูุง:
- โ ุงูุชุทุจูู ูุบูู
- โ ุงูุชุทุจูู ูู ุงูู background

---

## ๐ก ุงูุณุจุจ

ููุง ูุฑุณู `data` ููุท ุจุฏูู `notification`. 

**FCM ูุญุชุงุฌ:**
- `notification`: ููุฅุดุนุงุฑุงุช ุงูุชููุงุฆูุฉ (ุชุธูุฑ ุญุชู ูู ุงูุชุทุจูู ููููู)
- `data`: ููุจูุงูุงุช ุงูุฅุถุงููุฉ (ูุชุนุงูู ูุนูุง ุงูุชุทุจูู)

---

## โ ุงูุญู

ุชู ุชุนุฏูู `cloudflare-webhook/src/index.js` ููุฑุณู:

```javascript
{
  message: {
    topic: 'all_users',
    // โ notification: ูุธูุฑ ุนูุฏูุง ุงูุชุทุจูู ููููู
    notification: {
      title: "โญ ุชู ุชูููู ุฏูุงุก ุจุงุฑุงุณูุชุงููู",
      body: "ุฃุญูุฏ ูุญูุฏ (5โญ): ููุชุฌ ููุชุงุฒ"
    },
    // โ data: ููุชุนุงูู ูุนู ูู ุงูุชุทุจูู
    data: {
      type: "new_product_review",
      screen: "reviews",
      rating: "5",
      ...
    }
  }
}
```

---

## ๐ ุฎุทูุงุช ุงูุชุทุจูู

### 1๏ธโฃ ูุดุฑ Worker ุงููุญุฏุซ

ูู **Terminal/Command Prompt**:

```bash
cd D:\fieldawy_store\cloudflare-webhook
npx wrangler deploy
```

**ุฅุฐุง ุทูุจ ุชุณุฌูู ุฏุฎูู:**
```bash
npx wrangler login
```

---

### 2๏ธโฃ ุงุฎุชุจุงุฑ

#### ุงุฎุชุจุงุฑ ูุฏูู:
```bash
cd D:\fieldawy_store
node test_webhook_manual.js
```

#### ูู ุงูุชุทุจูู:
1. **ุฃุบูู ุงูุชุทุจูู ุชูุงูุงู**
2. ูู ุฌูุงุฒ ุขุฎุฑ ุฃู ูุชุตูุญุ ุฃุถู ุชุนููู ุฌุฏูุฏ
3. โ **ุงูููุฑูุถ ูุธูุฑ ุฅุดุนุงุฑ** ุนูู ุงููุงุชู ุญุชู ูู ุงูุชุทุจูู ููููู!

---

## ๐ฑ ุฃููุงุน ุงูุฅุดุนุงุฑุงุช

### โ ุฅุดุนุงุฑ ุทูุจ ุชูููู:
```
โญ ุทูุจ ุชูููู ุฌุฏูุฏ
ุทูุจ ุฃุญูุฏ ูุญูุฏ ุชูููู ุฏูุงุก ุจุงุฑุงุณูุชุงููู
```

### โ ุฅุดุนุงุฑ ุชุนููู ุฌุฏูุฏ:
```
โญ ุชู ุชูููู ุฏูุงุก ุจุงุฑุงุณูุชุงููู
ูุญูุฏ ุนูู (5โญ): ููุชุฌ ููุชุงุฒ ููุนุงู
```

---

## ๐ ุงูุชุญูู

### ูู Cloudflare Worker Logs:
```
โ Notification sent successfully!
   Title: โญ ุชู ุชูููู ุฏูุงุก ุจุงุฑุงุณูุชุงููู
```

### ุนูู ุงููุงุชู:
- โ ูุธูุฑ ุงูุฅุดุนุงุฑ ุญุชู ูู ุงูุชุทุจูู ููููู
- โ ุงูุถุบุท ุนูู ุงูุฅุดุนุงุฑ ููุชุญ ุงูุชุทุจูู
- โ ูุธูุฑ ูู notification tray

---

## ๐ฏ ุงููุฑู ุจูู `notification` ู `data`

| ุงูุญูู | ุงูุงุณุชุฎุฏุงู | ูุธูุฑ ูู Backgroundุ |
|-------|-----------|---------------------|
| **notification** | ุงูุฅุดุนุงุฑ ุงููุฑุฆู | โ ูุนู |
| **data** | ุงูุจูุงูุงุช ุงูุฅุถุงููุฉ | โ ูุง (ูุญุชุงุฌ ุงูุชุทุจูู ููุชูุญ) |

**ุงูุญู ุงูุฃูุซู:** ุงุณุชุฎุฏุงูููุง ูุนุงู! โ

---

## โ ูุงุฆูุฉ ุงูุชุญูู

- [ ] ูุดุฑุช Worker ุงููุญุฏุซ (`npx wrangler deploy`)
- [ ] ุงุฎุชุจุฑุช ูู `test_webhook_manual.js`
- [ ] ุฃุบููุช ุงูุชุทุจูู ุชูุงูุงู
- [ ] ุฃุถูุช ุชุนููู ุฌุฏูุฏ ูู ุฌูุงุฒ ุขุฎุฑ
- [ ] ุธูุฑ ุงูุฅุดุนุงุฑ ุนูู ุงููุงุชู โ

---

## ๐ ุฅุฐุง ูู ูุธูุฑ ุงูุฅุดุนุงุฑ

### 1. ุชุญูู ูู ุงูู permissions:
ูู ุฅุนุฏุงุฏุงุช ุงููุงุชู โ ุงูุชุทุจูู โ Notifications โ **ููุนู**

### 2. ุชุญูู ูู FCM Token:
ุชุฃูุฏ ุฃู ุงูุฌูุงุฒ ูุดุชุฑู ูู topic `all_users`

### 3. ุฑุงูุจ Cloudflare Logs:
```
Workers & Pages โ your-worker โ Logs โ Real-time
```

---

## ๐ ุฌุงูุฒ!

ุงูุขู ุงูุฅุดุนุงุฑุงุช ุชุธูุฑ ุญุชู ูู:
- โ ุงูุชุทุจูู ููููู ุชูุงูุงู
- โ ุงูุชุทุจูู ูู ุงูู background
- โ ุงูุดุงุดุฉ ูููููุฉ

**ุงุณุชูุชุน ุจุงูุฅุดุนุงุฑุงุช ุงูููุฑูุฉ!** ๐
