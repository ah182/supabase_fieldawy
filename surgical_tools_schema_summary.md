# ๐ ุจููุฉ ุฌุฏุงูู ุงูุฃุฏูุงุช ุงูุฌุฑุงุญูุฉ

## ๐ฏ ุงูุชุนุฏูู ุงูุฑุฆูุณู: 
**ุงููุตู ุงูุขู ูู ุฌุฏูู ุงูููุฒุนูู** - ูู ููุฒุน ููุชุจ ูุตูู ุงูุฎุงุต! โญ

---

## ๐ ุงูุฌุฏุงูู

### 1๏ธโฃ `surgical_tools` - ุงููุชุงููุฌ ุงูุนุงู

ูุนูููุงุช ุงูุฃุฏุงุฉ ุงูุฃุณุงุณูุฉ ุงููุดุชุฑูุฉ ุจูู ุฌููุน ุงูููุฒุนูู:

| ุงูุญูู | ุงูููุน | ุฅุฌุจุงุฑูุ | ุงููุตู |
|-------|------|---------|-------|
| `id` | UUID | โ | ุงููุนุฑู ุงููุฑูุฏ |
| `tool_name` | TEXT | โ | ุงุณู ุงูุฃุฏุงุฉ |
| `company` | TEXT | โ | ุงูุดุฑูุฉ ุงููุตูุนุฉ (ุงุฎุชูุงุฑู) |
| `image_url` | TEXT | โ | ุฑุงุจุท ุงูุตูุฑุฉ ุนูู Cloudinary |
| `created_by` | UUID | โ | ูู ุฃุถุงู ุงูุฃุฏุงุฉ |
| `created_at` | TIMESTAMPTZ | โ | ููุช ุงูุฅูุดุงุก |
| `updated_at` | TIMESTAMPTZ | โ | ููุช ุขุฎุฑ ุชุญุฏูุซ |

---

### 2๏ธโฃ `distributor_surgical_tools` - ุฃุฏูุงุช ุงูููุฒุนูู

ูุนูููุงุช ุฎุงุตุฉ ุจูู ููุฒุน (ุงูุณุนุฑ + ุงููุตู ุงูุฎุงุต ุจู):

| ุงูุญูู | ุงูููุน | ุฅุฌุจุงุฑูุ | ุงููุตู |
|-------|------|---------|-------|
| `id` | UUID | โ | ุงููุนุฑู ุงููุฑูุฏ |
| `distributor_id` | UUID | โ | ูุนุฑู ุงูููุฒุน |
| `distributor_name` | TEXT | โ | ุงุณู ุงูููุฒุน |
| `surgical_tool_id` | UUID | โ | ูุนุฑู ุงูุฃุฏุงุฉ |
| **`description`** | **TEXT** | **โ** | **ูุตู ุงูููุฒุน ุงูุฎุงุต ููุฃุฏุงุฉ** โญ |
| `price` | NUMERIC(12,2) | โ | ุณุนุฑ ุงูุฃุฏุงุฉ |
| `stock_quantity` | INTEGER | โ | ุงููููุฉ ุงููุชุงุญุฉ (ูููุณุชูุจู) |
| `is_available` | BOOLEAN | โ | ูู ูุชุงุญ ููุจูุนุ |
| `created_at` | TIMESTAMPTZ | โ | ููุช ุงูุฅุถุงูุฉ |
| `updated_at` | TIMESTAMPTZ | โ | ููุช ุขุฎุฑ ุชุญุฏูุซ |

**Constraint**: `UNIQUE(distributor_id, surgical_tool_id)` - ููุน ุงูุชูุฑุงุฑ

---

## ๐ ูุซุงู ุนููู

### ุงูุณููุงุฑูู:
ุซูุงุซุฉ ููุฒุนูู ูุจูุนูู ููุณ ุงูุฃุฏุงุฉ "Surgical Scissors":

```sql
-- 1. ุงูุฃุฏุงุฉ ูู ุงููุชุงููุฌ ุงูุนุงู (ูุฑุฉ ูุงุญุฏุฉ ููุท)
surgical_tools:
โโ id: "abc-123"
โโ tool_name: "Surgical Scissors"
โโ company: "MedTech Pro"
โโ image_url: "https://..."

-- 2. ูู ููุฒุน ูุถูู ุงูุฃุฏุงุฉ ุจุณุนุฑู ููุตูู ุงูุฎุงุต
distributor_surgical_tools:

โโ ููุฒุน ุฃุญูุฏ:
โ  โโ surgical_tool_id: "abc-123"
โ  โโ description: "ููุต ุฌุฑุงุญู ุนุงูู ุงูุฌูุฏุฉุ ุงุณุชุงููุณ ุงุณุชููุ ููุงุณุจ ููุนูุงุฏุงุช ุงูุจูุทุฑูุฉ"
โ  โโ price: 150.00 EGP
โ
โโ ููุฒุน ูุญูุฏ:
โ  โโ surgical_tool_id: "abc-123"
โ  โโ description: "ููุต ุฌุฑุงุญู ุฃููุงูู ุงูุตูุนุ ุถูุงู ุณูุชููุ ุชูุตูู ูุฌุงูู"
โ  โโ price: 175.00 EGP
โ
โโ ููุฒุน ูุงุทูุฉ:
   โโ surgical_tool_id: "abc-123"
   โโ description: "ููุต ุฌุฑุงุญู ููุชุงุฒุ ูุณุชูุฑุฏุ ุนุฑุถ ุฎุงุต ููุชุฑุฉ ูุญุฏูุฏุฉ!"
   โโ price: 140.00 EGP
```

---

## ๐ ุงูุญูุงูุฉ (RLS Policies)

- โ **ุงููุฑุงุกุฉ**: ุงูุฌููุน ูููููู ูุฑุงุกุฉ ุงููุชุงููุฌ ูุงูุฃุฏูุงุช
- โ **ุงูุฅุถุงูุฉ**: ุงููุณุชุฎุฏููู ุงููุณุฌููู ููุท
- โ **ุงูุชุนุฏูู/ุงูุญุฐู**: ูู ููุฒุน ูุนุฏู ุฃุฏูุงุชู ููุท

---

## โก ุงูุฃุฏุงุก (Indexes)

- Full-text search ุนูู ุงุณู ุงูุฃุฏุงุฉ
- Full-text search ุนูู ุงููุตู โญ
- ููุฑุณ ุนูู ุงูููุฒุน ูุงูุฃุฏุงุฉ
- ููุฑุณ ุนูู ุงูููุชุฌุงุช ุงููุชุงุญุฉ

---

## ๐๏ธ ุงูุฏูุงู ุงููุณุงุนุฏุฉ

### `get_distributor_surgical_tools(dist_id)`
ุฌูุจ ุฌููุน ุฃุฏูุงุช ููุฒุน ูุนูู ูุน ุงูุชูุงุตูู ุงููุงููุฉ (ุจูุง ูููุง ูุตูู ุงูุฎุงุต)

### `search_surgical_tools(search_query)`
ุงูุจุญุซ ูู ุฌููุน ุงูุฃุฏูุงุช (ุงูุงุณูุ ุงูุดุฑูุฉุ ุงููุตู)

---

## ๐ฑ ูู Flutter

```dart
// ุงููุซุงู:
SurgicalToolModel(
  id: 'abc-123',
  toolName: 'Surgical Scissors',
  company: 'MedTech Pro',
  imageUrl: 'https://...',
  
  // ูุนูููุงุช ุงูููุฒุน ุงูุฎุงุตุฉ:
  description: 'ููุต ุฌุฑุงุญู ุนุงูู ุงูุฌูุฏุฉ...',  // ูุตู ุงูููุฒุน โญ
  price: 150.00,
  distributorName: 'ุฃุญูุฏ ูููุณุชูุฒูุงุช ุงูุทุจูุฉ',
  isAvailable: true,
);
```

---

## โ ุงููุฒุงูุง

| ุงูููุฒุฉ | ุงููุงุฆุฏุฉ |
|-------|---------|
| ๐ฏ **ูุฑููุฉ ูู ุงููุตู** | ูู ููุฒุน ููุชุจ ูุง ูููุฒ ููุชุฌู |
| ๐ฐ **ุชูุงูุณูุฉ ุงูุณุนุฑ** | ููุณ ุงูุฃุฏุงุฉ ุจุฃุณุนุงุฑ ูุฎุชููุฉ |
| ๐ฆ **ุฅุนุงุฏุฉ ุงูุงุณุชุฎุฏุงู** | ุงูุฃุฏุงุฉ ุชูุญูุธ ูุฑุฉ ูุงุญุฏุฉ |
| ๐ **ุจุญุซ ุฃูุถู** | ุงูุจุญุซ ูู ุฃูุตุงู ุงูููุฒุนูู |
| ๐ **ุฃุฏุงุก ุนุงูู** | Indexes ุนูู ุฌููุน ุงูุญููู ุงููููุฉ |

---

## ๐ ุงูุชูุงูู ูุน OCR Screen

ุนูุฏ `isFromSurgicalTools = true`:
- โ Tool Name โ `surgical_tools.tool_name`
- โ Company (Optional) โ `surgical_tools.company`
- โ Description โ `distributor_surgical_tools.description` โญ
- โ Price โ `distributor_surgical_tools.price`
- โ Image โ `surgical_tools.image_url`
