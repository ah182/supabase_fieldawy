# ๐ฏ Top Users - ุงููุณุฎุฉ ุงูููุงุฆูุฉ

## โ ูุง ูุชู ุนุฑุถู ุงูุขู

### 1๏ธโฃ **Total Products (ุนุฏุฏ ุงูููุชุฌุงุช)** ๐ฆ
**ูุงุฐุง ูุนุจุฑ:** ุนุฏุฏ ุงูููุชุฌุงุช ุงููู ุฃุถุงููุง ุงูููุฒุน
- Distributor Products (ููุชุฌุงุช ูุฏููุฉ)
- Distributor OCR Products (ููุชุฌุงุช ุจุงูุชุตููุฑ)

**ุงูุญุณุงุจ:**
```dart
Total Products = Distributor Products + Distributor OCR Products
```

---

### 2๏ธโฃ **Total Views (ุงููุดุงูุฏุงุช ุนูู ููุชุฌุงุชู)** ๐๏ธ
**ูุงุฐุง ูุนุจุฑ:** ุนุฏุฏ ุงููุฑุงุช ุงููู **ุงููุณุชุฎุฏููู ุงูุชุงูููู** ุดุงููุง **ููุชุฌุงุช ูุฐุง ุงูููุฒุน**

**ููู ูุชู ุญุณุงุจูุง:**
1. ุฌูุจ ุฌููุน ููุชุฌุงุช ุงูููุฒุน (ูู `distributor_products` ู `distributor_ocr_products`)
2. ุฌูุจ ุงููุดุงูุฏุงุช ูู `product_views` ุนูู ูุฐู ุงูููุชุฌุงุช
3. ุญุณุงุจ ุงูุนุฏุฏ ููู ููุฒุน

**ูุซุงู:**
```
ุงูููุฒุน ุนูุฏู:
- Product A (ID: 123)
- Product B (ID: 456)

ุงููุดุงูุฏุงุช ูู product_views:
- Product 123 ุชู ูุดุงูุฏุชู 50 ูุฑุฉ
- Product 456 ุชู ูุดุงูุฏุชู 30 ูุฑุฉ
-------------------------------
Total Views ููููุฒุน = 50 + 30 = 80 ูุดุงูุฏุฉ
```

---

## ๐ฏ ุงูุชุฑุชูุจ

### ููู ูุชู ุงูุชุฑุชูุจุ

**ุงูุฃููููุฉ 1:** ุนุฏุฏ ุงูููุชุฌุงุช (Total Products)
**ุงูุฃููููุฉ 2:** ุนุฏุฏ ุงููุดุงูุฏุงุช (Total Views)

```dart
// ุงูุชุฑุชูุจ
if (productsB != productsA) {
  return productsB.compareTo(productsA); // ุงูุฃูุซุฑ ููุชุฌุงุช ุฃููุงู
}
return viewsB.compareTo(viewsA); // ุฅุฐุง ุชุณุงููุงุ ุงูุฃูุซุฑ ูุดุงูุฏุงุช ุฃููุงู
```

**ูุนูุงูุง:**
- ุงูููุฒุน ุงููู ุนูุฏู **ุฃูุซุฑ ููุชุฌุงุช** ูุธูุฑ **ูู ุงูุฃูู**
- ูู ุงุชููู ุนูุฏูู ููุณ ุนุฏุฏ ุงูููุชุฌุงุชุ ุงููู ุนูุฏู **ุฃูุซุฑ ูุดุงูุฏุงุช** ูุธูุฑ ุงูุฃูู

---

## ๐ ูุซุงู ุชุทุจููู

### ุงูุจูุงูุงุช:

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ Rank โ Name          โ Products โ Views โ ุงูุชุฑุชูุจ         โ
โโโโโโโโผโโโโโโโโโโโโโโโโผโโโโโโโโโโโผโโโโโโโโผโโโโโโโโโโโโโโโโโโโค
โ  1   โ Ahmed Hassan  โ   250 โญ โ 5,000 โ ุฃูุซุฑ ููุชุฌุงุช    โ
โ  2   โ Mohamed Ali   โ   200    โ 6,000 โ ููุชุฌุงุช ุฃูู      โ
โ  3   โ Sara Ibrahim  โ   200    โ 4,500 โ ููุณ ุงูููุชุฌุงุช   โ
โ  4   โ Fatma Khaled  โ   150    โ 8,000 โ ููุชุฌุงุช ุฃูู      โ
โโโโโโโโดโโโโโโโโโโโโโโโโดโโโโโโโโโโโดโโโโโโโโดโโโโโโโโโโโโโโโโโโโ
```

### ุชูุณูุฑ ุงูุชุฑุชูุจ:

#### **Ahmed Hassan (ุงููุฑูุฒ ุงูุฃูู):**
- **Products = 250** (ุงูุฃูุซุฑ) โญ
- **Views = 5,000** (ููุชุฌุงุชู ุงุชุดุงูุช 5,000 ูุฑุฉ)
- **ุงูุณุจุจ:** ุนูุฏู ุฃูุซุฑ ุนุฏุฏ ููุชุฌุงุช

---

#### **Mohamed Ali (ุงููุฑูุฒ ุงูุซุงูู):**
- **Products = 200**
- **Views = 6,000** (ุฃุนูู ูู Sara)
- **ุงูุณุจุจ:** ุนูุฏู 200 ููุชุฌุ ู6,000 ูุดุงูุฏุฉ (ุฃุนูู ูู Sara)

---

#### **Sara Ibrahim (ุงููุฑูุฒ ุงูุซุงูุซ):**
- **Products = 200** (ููุณ Mohamed)
- **Views = 4,500** (ุฃูู ูู Mohamed)
- **ุงูุณุจุจ:** ููุณ ุนุฏุฏ ุงูููุชุฌุงุช ููู ูุดุงูุฏุงุช ุฃูู

---

#### **Fatma Khaled (ุงููุฑูุฒ ุงูุฑุงุจุน):**
- **Products = 150** (ุฃูู ูู ุงููู)
- **Views = 8,000** (ุงูุฃุนูู!)
- **ุงูุณุจุจ:** ุฑุบู ุฅู ุนูุฏูุง ุฃุนูู ูุดุงูุฏุงุชุ ููู ุนุฏุฏ ููุชุฌุงุชูุง ุฃูู

---

## ๐ ููู ูุนูู ุงูููุฏ

### ุงูุฎุทูุงุช:

#### 1๏ธโฃ ุฌูุจ ุนุฏุฏ ุงูููุชุฌุงุช:
```dart
// ููุชุฌุงุช ุงูููุฒุน
final distributorProducts = await supabase
    .from('distributor_products')
    .select('distributor_id');

// ููุชุฌุงุช OCR ุงูููุฒุน
final distributorOcr = await supabase
    .from('distributor_ocr_products')
    .select('distributor_id');

// ุญุณุงุจ ุงูุฅุฌูุงูู
userStats[userId]['total_products'] = 
    distributorProducts.count + distributorOcr.count;
```

---

#### 2๏ธโฃ ุฌูุจ ุงููุดุงูุฏุงุช ุนูู ููุชุฌุงุช ุงูููุฒุน:
```dart
// 1. ุฌูุจ ุฌููุน ุงูููุชุฌุงุช ูุน distributor_id
final allProducts = await supabase
    .from('distributor_products')
    .select('id, distributor_id');

// 2. ุจูุงุก Map: product_id -> distributor_id
Map<String, String> productToDistributor = {
  '123': 'distributor_1',
  '456': 'distributor_1',
  '789': 'distributor_2',
};

// 3. ุฌูุจ ุงููุดุงูุฏุงุช
final views = await supabase
    .from('product_views')
    .select('product_id');

// 4. ุญุณุงุจ ุงููุดุงูุฏุงุช ููู ููุฒุน
for (var view in views) {
  final productId = view['product_id'];
  final distributorId = productToDistributor[productId];
  
  // ุฒูุงุฏุฉ ุนุฏุงุฏ ุงููุดุงูุฏุงุช ููููุฒุน
  userStats[distributorId]['total_views']++;
}
```

---

#### 3๏ธโฃ ุงูุชุฑุชูุจ:
```dart
sortedUsers.sort((a, b) {
  // ุฃููุงู: ุนุฏุฏ ุงูููุชุฌุงุช
  if (productsB != productsA) {
    return productsB.compareTo(productsA);
  }
  // ุซุงููุงู: ุนุฏุฏ ุงููุดุงูุฏุงุช
  return viewsB.compareTo(viewsA);
});
```

---

## ๐ ุงูุฌุฏุงูู ุงููุณุชุฎุฏูุฉ

### ูุทููุจุฉ:
- โ `distributor_products` (id, distributor_id)
- โ `distributor_ocr_products` (id, distributor_id)
- โ `product_views` (product_id)
- โ `users` (id, display_name, email, role)

---

## ๐ก ุงููุฑู ุจูู ุงููุฏูู ูุงูุฌุฏูุฏ

### ุงููุฏูู โ:
```
- ุนุฏุฏ ุงูุจุญุซ (Search) - ูุด ููู ููููุฒุนูู
- ุนุฏุฏ ูุดุงูุฏุงุช ุงููุณุชุฎุฏู - ูุด ููุชุฌุงุชู
- ุงูุชุฑุชูุจ ุญุณุจ ุนุฏุฏ ุงูููุชุฌุงุช ููุท
```

### ุงูุฌุฏูุฏ โ:
```
- ุนุฏุฏ ุงูููุชุฌุงุช (Products) - ูุงู ููุชุฌ ุฃุถุงู
- ุนุฏุฏ ุงููุดุงูุฏุงุช ุนูู ููุชุฌุงุชู (Views) - ูุงู ูุงุญุฏ ุดุงู ููุชุฌุงุชู
- ุงูุชุฑุชูุจ ุญุณุจ ุงูุงุชููู ูุน ุจุนุถ
```

---

## ๐ ุนุฑุถ ุงููุชุงุฆุฌ

### ูู ุงูู UI:

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ Top Distributors by Products & Views                    โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ Rank โ Name          โ Products โ Views  โ ุงูุฃุฏุงุก       โ
โโโโโโโโผโโโโโโโโโโโโโโโโผโโโโโโโโโโโผโโโโโโโโโผโโโโโโโโโโโโโโโค
โ  1   โ Ahmed Hassan  โ   250 โญ โ 5,000  โ ููุชุงุฒ        โ
โ  2   โ Mohamed Ali   โ   200    โ 6,000  โ ุฌูุฏ ุฌุฏุงู     โ
โ  3   โ Sara Ibrahim  โ   200    โ 4,500  โ ุฌูุฏ          โ
โ  4   โ Fatma Khaled  โ   150    โ 8,000  โ ููุชุฌุงุช ููููุฉโ
โ  5   โ Omar Saeed    โ   120    โ 2,500  โ ูุชูุณุท        โ
โโโโโโโโดโโโโโโโโโโโโโโโโดโโโโโโโโโโโดโโโโโโโโโดโโโโโโโโโโโโโโโ
```

### ุงูุชุญููู:
- **Ahmed:** ุงูุฃูุถู - ุฃูุซุฑ ููุชุฌุงุช ููุดุงูุฏุงุช ุนุงููุฉ
- **Mohamed:** ุฌูุฏ - ููุชุฌุงุช ูุซูุฑุฉ ููุดุงูุฏุงุช ุฃุนูู
- **Sara:** ุฌูุฏ - ููุณ ุงูููุชุฌุงุช ููู ูุดุงูุฏุงุช ุฃูู
- **Fatma:** ูุญุชุงุฌ ุชุญุณูู - ููุชุฌุงุช ููููุฉ ุฑุบู ุงููุดุงูุฏุงุช ุงูุนุงููุฉ
- **Omar:** ูุชูุณุท - ูุญุชุงุฌ ุฅุถุงูุฉ ููุชุฌุงุช ุฃูุซุฑ

---

## โ ุงูุฎูุงุตุฉ

### ูุง ูุชู ุนุฑุถู:
1. โ **ุนุฏุฏ ุงูููุชุฌุงุช** - ุงููู ุฃุถุงููุง ุงูููุฒุน
2. โ **ุงููุดุงูุฏุงุช ุนูู ููุชุฌุงุชู** - ูู ุงููุณุชุฎุฏููู ุงูุชุงูููู

### ุงูุชุฑุชูุจ:
1. ๐ฅ **ุงูุฃููููุฉ ุงูุฃููู:** ุงูุฃูุซุฑ ููุชุฌุงุช
2. ๐ฅ **ุงูุฃููููุฉ ุงูุซุงููุฉ:** ุงูุฃูุซุฑ ูุดุงูุฏุงุช (ูู ุญุงูุฉ ุงูุชุณุงูู)

### ุงููุฏู:
- ูุนุฑูุฉ ุงูููุฒุนูู ุงูุฃูุซุฑ **ูุดุงุทุงู** (ุนุฏุฏ ุงูููุชุฌุงุช)
- ูุนุฑูุฉ ุงูููุฒุนูู ุงูุฃูุซุฑ **ุดุนุจูุฉ** (ูุดุงูุฏุงุช ุนูู ููุชุฌุงุชูู)

---

**๐ ุงูุขู Top Users ูุนุฑุถ ุงูุจูุงูุงุช ุงููููุฉ ุจุดูู ุฏููู! ๐**

```bash
flutter run -d chrome
```

**ุซู ุงุฎุชุจุฑ: Analytics โ Top Performers โ Top Users**
