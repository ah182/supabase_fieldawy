# ๐ ูุญุชุงุฌ Render Logs

## โ ุงููุดููุฉ:

ูุงุฒุงู ูุธูุฑ:
```
Tab Name: price_action
Title: ๐ฐ ุชู ุชุญุฏูุซ ุณุนุฑ ููุชุฌ
```

ุจุฏูุงู ูู:
```
Tab Name: expire_soon_price
Title: ๐ฐโ๏ธ ุชุญุฏูุซ ุณุนุฑ ููุชุฌ ุนูู ูุดู ุงูุชูุงุก ุตูุงุญูุชู
```

---

## ๐ ูุญุชุงุฌ ูุฐู ุงููุนูููุงุช:

### 1๏ธโฃ ูู Render Logs (ุขุฎุฑ webhook):

ุงูุณุฎ **ูู ุงูุณุทูุฑ** ูู ุงูุจุฏุงูุฉ ููููุงูุฉ:

```
๐ฉ ุชููู webhook ูู Supabase
   Operation: ...
   Table: ...
   Record: {...}
   Product Name: ...
   Tab Name: ...
โ ุชู ุฅุฑุณุงู ุงูุฅุดุนุงุฑ ุจูุฌุงุญ!
   Title: ...
```

**ุฃุฑุณู ูู ูู ุงูุณุทูุฑ ุจุงููุงูู!**

---

### 2๏ธโฃ ุงูุญุต ุงูููุชุฌ ูู Supabase:

```sql
SELECT 
  id,
  product_id,
  price,
  expiration_date,
  EXTRACT(DAY FROM (expiration_date - NOW())) as days_remaining,
  CASE 
    WHEN expiration_date IS NULL THEN 'โ ูุง ููุฌุฏ ุชุงุฑูุฎ'
    WHEN expiration_date <= NOW() THEN 'โ ููุชูู'
    WHEN expiration_date > NOW() + INTERVAL '60 days' THEN 'โ ุฃูุซุฑ ูู 60 ููู'
    ELSE 'โ ูุงุฑุจ ุงูุชูุงุก (1-60 ููู)'
  END as status
FROM distributor_products
WHERE id = 'd2dc420f-bdf4-4dd9-8212-279cb74922a9_592_20 ml vial';
```

**ุฃุฑุณู ูู ุงููุชูุฌุฉ!**

---

### 3๏ธโฃ ุชุฃูุฏ ูู Deploy:

ูู Render Dashboard:
- **Events** tab
- ุดุงูุฏ ุขุฎุฑ deploy
- **ูุชู ุชูุ** (ูุฌุจ ุฃู ูููู ุจุนุฏ ุขุฎุฑ push)

---

## ๐ค ุงูุฃุณุจุงุจ ุงููุญุชููุฉ:

### ุงูุณุจุจ 1: ุงูููุชุฌ ููุณ ูุงุฑุจ ุงูุชูุงุก ูุนููุงู

**ุฅุฐุง ูุงู `expiration_date`:**
- โ ุฃูุซุฑ ูู 60 ููู โ ูู ูุนุชุจุฑู ูุงุฑุจ ุงูุชูุงุก
- โ NULL โ ูู ูุนุชุจุฑู ูุงุฑุจ ุงูุชูุงุก
- โ ููุชูู ุจุงููุนู (< NOW) โ ูู ูุนุชุจุฑู ูุงุฑุจ ุงูุชูุงุก

**ุงูุญู:** ุงุฎุชุจุฑ ุจููุชุฌ ููุชูู ุฎูุงู 30 ููู

---

### ุงูุณุจุจ 2: Deploy ูู ููุชูู ุฃู ูุดู

**ุงูุญู:** ุชุฃูุฏ ูู Deploy status ูู Render

---

### ุงูุณุจุจ 3: ุฎุทุฃ ูู ุฌูุจ expiration_date

**ููุชุญูู:** ุงุจุญุซ ูู Render Logs ุนู:
```
ุฎุทุฃ ูู ุฌูุจ expiration_date: ...
```

ุฅุฐุง ูุงู ููุฌูุฏุ ูุนูุงูุง ูุดููุฉ ูู ุงูุงุชุตุงู ุจู Supabase.

---

## ๐งช ุงุฎุชุจุงุฑ ุฌุฏูุฏ ุชูุงูุงู:

### ุฃุถู ููุชุฌ ุชุฌุฑูุจู:

```sql
-- 1. ุญุฐู ุงูููุชุฌ ุงูุชุฌุฑูุจู ุงููุฏูู (ุฅุฐุง ูุงู ููุฌูุฏ)
DELETE FROM distributor_products WHERE id = 'final_test_expire_price';

-- 2. ุฃุถู ููุชุฌ ุฌุฏูุฏ ููุชูู ุฎูุงู 30 ููู
INSERT INTO distributor_products (
  id,
  distributor_id, 
  product_id,
  package,
  price,
  expiration_date
) VALUES (
  'final_test_expire_price',
  (SELECT id FROM users WHERE role = 'distributor' LIMIT 1),
  (SELECT id FROM products LIMIT 1),
  'Test Box',
  100.00,
  NOW() + INTERVAL '30 days'
);
```

**ุงููุชููุน:**
```
โ๏ธ ุชู ุฅุถุงูุฉ ููุชุฌ ูุฑูุจ ุงูุตูุงุญูุฉ
[ุงุณู ุงูููุชุฌ] - [ููุฒุน] - ููุชูู ุฎูุงู 30 ููู
```

---

### ุญุฏูุซ ุงูุณุนุฑ:

```sql
UPDATE distributor_products
SET price = 150.00
WHERE id = 'final_test_expire_price';
```

**ุงููุชููุน:**
```
๐ฐโ๏ธ ุชุญุฏูุซ ุณุนุฑ ููุชุฌ ุนูู ูุดู ุงูุชูุงุก ุตูุงุญูุชู
[ุงุณู ุงูููุชุฌ] - [ููุฒุน]
```

---

### ุงูุญุต Render Logs:

**ูุฌุจ ุฃู ุชุดุงูุฏ:**
```
๐ฉ ุชููู webhook ูู Supabase
   Tab Name: expire_soon_price  โ ูุฌุจ ุฃู ูููู ูุฐุง!
โ ุชู ุฅุฑุณุงู ุงูุฅุดุนุงุฑ ุจูุฌุงุญ!
   Title: ๐ฐโ๏ธ ุชุญุฏูุซ ุณุนุฑ ููุชุฌ ุนูู ูุดู ุงูุชูุงุก ุตูุงุญูุชู
```

---

## ๐ ุฌุฏูู ุงูุชุดุฎูุต:

| ูุง ุชุดุงูุฏู ูู Logs | ุงููุดููุฉ | ุงูุญู |
|-------------------|---------|------|
| `Tab Name: price_action` | ูู ูุชุนุฑู ุนูู ููุชุฌ ูุงุฑุจ ุงูุชูุงุก | ุงูุญุต `expiration_date` ูู SQL |
| `Tab Name: expire_soon_price` | โ ุตุญูุญ! | ุงูููุฏ ูุนููุ ุชุญูู ูู ุงูุฅุดุนุงุฑ |
| ุฎุทุฃ ูู ุฌูุจ expiration_date | ูุดููุฉ ุงุชุตุงู Supabase | ุชุญูู ูู SUPABASE_URL/KEY |
| ูุง ููุฌุฏ logs ุฌุฏูุฏุฉ | Deploy ูู ููุชูู | ุงูุชุธุฑ Deploy |

---

**ุฃุฑุณู ูู ุงููุนูููุงุช ูุณุฃุญู ุงููุดููุฉ! ๐**
