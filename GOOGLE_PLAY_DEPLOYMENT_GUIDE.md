# دليل تجهيز تطبيق Fieldawy Store للنشر على Google Play

يحتوي هذا الدليل على كافة الخطوات اللازمة لتحويل التطبيق من وضع التطوير إلى وضع الإنتاج والنشر الرسمي.

---

## ١. التجهيزات التقنية الأساسية

### أ. تغيير اسم الحزمة (Package Name)
تأكد من أن اسم الحزمة فريد ولا يتشابه مع أي تطبيق آخر.
*   الملف: `android/app/build.gradle`
*   القيمة: `applicationId "com.fieldawy.app"` (أو الاسم الذي تختاره).

### ب. تحديث الإصدار (Versioning)
قم بتحديث رقم الإصدار في ملف `pubspec.yaml` قبل كل عملية بناء جديدة:
```yaml
version: 1.0.0+1
# 1.0.0 هو الرقم الذي يظهر للمستخدم
# 1 هو الـ versionCode (يجب زيادته مع كل رفعة جديدة للمتجر)
```

### ج. الأيقونات وشاشة البدء
تأكد من تشغيل الأوامر التالية لتوليد الأيقونات النهائية:
```powershell
flutter pub run flutter_launcher_icons
flutter pub run flutter_native_splash:create
```

---

## ٢. توقيع التطبيق (App Signing)

جوجل بلاي يتطلب أن يكون التطبيق موقعاً بمفتاح خاص (Keystore).

### الخطوة ١: إنشاء ملف الـ Keystore
افتح التيرمينال وقم بتشغيل الأمر التالي (استبدل `USER_NAME` باسم مستخدم ويندوز لديك):
```powershell
keytool -genkey -v -keystore c:\Users\USER_NAME\fieldawy-upload-key.jks -storetype JKS -keyalg RSA -keysize 2048 -validity 10000 -alias upload
```
*سيطلب منك كلمة سر، احفظها جيداً هي ومكان الملف. ضياع هذا الملف يعني عدم قدرتك على تحديث التطبيق للأبد.*

### الخطوة ٢: إعداد ملف الخصائص
أنشئ ملفاً باسم `key.properties` داخل مجلد `android` وضع فيه البيانات التالية:
```properties
storePassword=كلمة_السر_التي_اخترتها
keyPassword=كلمة_السر_التي_اخترتها
keyAlias=upload
storeFile=c:\\Users\\USER_NAME\\fieldawy-upload-key.jks
```

### الخطوة ٣: ربط المفتاح بـ Gradle
تأكد من تعديل ملف `android/app/build.gradle` ليتعرف على ملف الخصائص ويقوم بتوقيع النسخة تلقائياً عند البناء.

---

## ٣. إعدادات الخدمات الخارجية (Firebase & Supabase)

### أ. استخراج بصمات SHA
لعمل تسجيل دخول جوجل بشكل صحيح في نسخة المتجر، يجب إضافة بصمة SHA للمفتاح الجديد:
```powershell
keytool -list -v -keystore c:\Users\USER_NAME\fieldawy-upload-key.jks -alias upload
```
1.  انسخ **SHA-1** و **SHA-256**.
2.  أضفهما في **Firebase Console** تحت إعدادات تطبيق الأندرويد.
3.  أضفهما في **Supabase Dashboard** تحت إعدادات الـ Authentication.
4.  قم بتحميل ملف `google-services.json` المحدث وضعه في `android/app/`.

---

## ٤. سياسة الخصوصية وأمان البيانات

*   **رابط سياسة الخصوصية:** يجب توفير رابط دائم (يمكنك استخدام GitHub Pages أو أي خدمة مجانية).
*   **نموذج أمان البيانات (Data Safety):** في لوحة جوجل، يجب أن تذكر أنك تجمع:
    *   **الموقع الجغرافي (Location):** لخدمة خريطة العيادات.
    *   **المعلومات الشخصية:** (الاسم، البريد، الهاتف) لإنشاء الحساب.
    *   **الصور:** للسماح برفع صور المنتجات والعيادات.

---

## ٥. بناء نسخة النشر النهائية

دائماً استخدم بصيغة `appbundle` بدلاً من `apk` لأنها توفر حجماً أصغر وتقنية حماية أفضل:

```powershell
# تنظيف المشروع
flutter clean
flutter pub get

# بناء النسخة النهائية
flutter build appbundle --release
```
ستجد الملف الناتج في المسار:
`build/app/outputs/bundle/release/app-release.aab`

---

## ٦. خطوات Google Play Console

1.  **دفع رسوم المطور:** (25 دولار لمرة واحدة).
2.  **إعداد المحتوى:** إكمال استبيان الفئة العمرية (تطبيق طبي/تجاري).
3.  **الصور التسويقية:**
    *   أيقونة عالية الجودة (512x512).
    *   صورة Feature Graphic (1024x500).
    *   على الأقل 4 صور شاشة (Screenshots) للموبايل.
4.  **المسار الداخلي (Internal Testing):** يفضل دائماً البدء برفع النسخة على "الاختبار الداخلي" أولاً قبل نشرها للعامة للتأكد من عدم وجود أخطاء عند التحميل.

---
**تم إعداد هذا الدليل بواسطة Gemini CLI لضمان عملية نشر ناجحة.**
