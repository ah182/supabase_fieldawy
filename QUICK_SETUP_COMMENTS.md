# ๐ ุฏููู ุณุฑูุน ูุชูุนูู ูุธุงู ุงูุชุนูููุงุช

## โ๏ธ **ุฎุทุฃ ุดุงุฆุน ูุญูู:**

ุฅุฐุง ูุงุฌูุช ุงูุฎุทุฃ:
```
ERROR: 42P01: relation "courses" does not exist
```

**ุงูุณุจุจ:** ุฃุณูุงุก ุงูุฌุฏุงูู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช ูู `vet_courses` ู `vet_books` ูููุณ `courses` ู `books`

**ุงูุญู:** โ ุชู ุฅุตูุงุญ SQL script ุชููุงุฆูุงู!

---

## ๐ **ุฎุทูุงุช ุงูุชูุนูู ุงูุณุฑูุนุฉ:**

### **ุงูุฎุทูุฉ 1: ุชุทุจูู SQL (ุฅูุฒุงูู)**

1. ุงูุชุญ [Supabase Dashboard](https://supabase.com/dashboard)
2. ุงุฎุชุฑ ูุดุฑูุนู
3. ุงุฐูุจ ุฅูู **SQL Editor** ูู ุงููุงุฆูุฉ ุงูุฌุงูุจูุฉ
4. ุงุถุบุท **New Query**
5. ุงูุณุฎ **ูู ูุญุชููุงุช** ุงูููู: `supabase/create_comments_tables.sql`
6. ุงูุตู ูู SQL Editor
7. ุงุถุบุท **Run** ุฃู ุงุถุบุท `Ctrl+Enter`

**ุงููุชูุฌุฉ ุงููุชููุนุฉ:**
```
โ Success. No rows returned
```

---

### **ุงูุฎุทูุฉ 2: ุชุดุบูู ุงูุชุทุจูู**

```bash
# ูู terminal
cd D:\fieldawy_store
flutter run
```

---

### **ุงูุฎุทูุฉ 3: ุงุฎุชุจุงุฑ ุงููุธุงู**

1. **ุงูุชุญ ุงูุชุทุจูู**
2. **ุณุฌู ุฏุฎูู** ุจุญุณุงุจู
3. **ุงุฐูุจ ูุชุงุจ ุงูููุฑุณุงุช** ุฃู ุงููุชุจ
4. **ุงุถุบุท ุนูู ุฃู ููุฑุณ/ูุชุงุจ**
5. **ูู ุงูุฏูุงููุฌ**: ุงุถุบุท ุฒุฑ **"ุชูุงุตูู ุงูููุฑุณ"** ุฃู **"ุชูุงุตูู ุงููุชุงุจ"**
6. **ุงูุชุจ ุชุนููู** ูู ุงููุฑุจุน ุงูุณููู
7. **ุงุถุบุท ุฅุฑุณุงู** ๐ค
8. **ุดุงูุฏ ุงูุชุนููู ูุธูุฑ ููุฑุงู!** โจ

---

## ๐ **ุงูุชุญูู ูู ูุฌุงุญ ุงูุชุทุจูู:**

### **ูู Supabase Dashboard:**

1. ุงุฐูุจ ุฅูู **Table Editor**
2. ูุฌุจ ุฃู ุชุฌุฏ ุฌุฏูููู ุฌุฏูุฏูู:
   - โ `course_comments`
   - โ `book_comments`
3. ุงูุชุญ ุฃู ุฌุฏูู ูุดุงูุฏ ุงูุฃุนูุฏุฉ:
   - `id`
   - `course_id` ุฃู `book_id`
   - `user_id`
   - `comment_text`
   - `created_at`
   - `updated_at`

---

## โ **ุญู ุงููุดุงูู ุงูุดุงุฆุนุฉ:**

### **ูุดููุฉ 1: ุงูุฌุฏุงูู `vet_courses` ุฃู `vet_books` ุบูุฑ ููุฌูุฏุฉ**

**ุงูุญู:**
```sql
-- ุชุญูู ูู ูุฌูุฏ ุงูุฌุฏุงูู ูู Supabase
SELECT table_name 
FROM information_schema.tables 
WHERE table_schema = 'public' 
AND table_name LIKE '%course%' OR table_name LIKE '%book%';
```

ุฅุฐุง ูุงูุช ุงูุฃุณูุงุก ูุฎุชููุฉุ ุนุฏูู SQL script ูู ุงูุณุทูุฑ:
- ุงูุณุทุฑ 6: `REFERENCES vet_courses(id)`
- ุงูุณุทุฑ 18: `REFERENCES vet_books(id)`

---

### **ูุดููุฉ 2: ุฎุทุฃ Permission Denied**

**ุงูุณุจุจ:** RLS Policies ุบูุฑ ููุนูุฉ

**ุงูุญู:**
```sql
-- ุดุบู ูุฐุง ูู SQL Editor
ALTER TABLE course_comments ENABLE ROW LEVEL SECURITY;
ALTER TABLE book_comments ENABLE ROW LEVEL SECURITY;
```

---

### **ูุดููุฉ 3: ุงูุชุนูููุงุช ูุง ุชุธูุฑ**

**ุงูุญููู ุงููุทููุจุฉ:**
1. โ ุชุณุฌูู ุงูุฏุฎูู
2. โ ุชุทุจูู SQL ุจูุฌุงุญ
3. โ ุงูุงุชุตุงู ุจุงูุฅูุชุฑูุช

**ุฎุทูุงุช ุงูุชุญูู:**
```dart
// ูู Console
print('User ID: ${Supabase.instance.client.auth.currentUser?.id}');
// ูุฌุจ ุฃู ูุทุจุน ID ูููุณ null
```

---

## ๐ฏ **ุงูููุฒุงุช ุงููุชููุฑุฉ:**

โ **ุฅุถุงูุฉ ุชุนููู** - ุงูุชุจ ูุฃุฑุณู
โ **ุญุฐู ุชุนููู** - ูููุณุชุฎุฏู ุตุงุญุจ ุงูุชุนููู ููุท
โ **Realtime** - ุงูุชุนูููุงุช ุชุธูุฑ ููุฑุงู ุจุฏูู refresh
โ **ุฃูุงู** - RLS ูุญูู ุงูุจูุงูุงุช
โ **ุนุฏุงุฏ ุงูุชุนูููุงุช** - ูุชุญุฏุซ ุชููุงุฆูุงู

---

## ๐ **ุจููุฉ ูุงุนุฏุฉ ุงูุจูุงูุงุช:**

```
vet_courses (ุงูุฌุฏูู ุงูุฃุณุงุณู)
    โโโ course_comments
        โโโ id (UUID)
        โโโ course_id โ vet_courses.id
        โโโ user_id โ users.id
        โโโ comment_text
        โโโ created_at
        โโโ updated_at

vet_books (ุงูุฌุฏูู ุงูุฃุณุงุณู)
    โโโ book_comments
        โโโ id (UUID)
        โโโ book_id โ vet_books.id
        โโโ user_id โ users.id
        โโโ comment_text
        โโโ created_at
        โโโ updated_at
```

---

## ๐ **ุงูุฃูุงู (RLS Policies):**

| ุงูุนูููุฉ | ูู ูุณุชุทูุนุ |
|---------|-------------|
| ูุฑุงุกุฉ ุงูุชุนูููุงุช | ุงูุฌููุน โ |
| ุฅุถุงูุฉ ุชุนููู | ุงููุณุชุฎุฏููู ุงููุณุฌููู ููุท โ |
| ุญุฐู ุชุนููู | ุตุงุญุจ ุงูุชุนููู ููุท ๐ |
| ุชุนุฏูู ุชุนููู | ุตุงุญุจ ุงูุชุนููู ููุท ๐ |

---

## ๐ **ุงูุฏุนู:**

**ุฅุฐุง ูุงุฌูุช ูุดููุฉ:**
1. ุชุฃูุฏ ูู ุชุทุจูู SQL ุจุงููุงูู
2. ุชุฃูุฏ ูู ุชุณุฌูู ุงูุฏุฎูู
3. ุงูุชุญ Console ูุงุจุญุซ ุนู ุฃุฎุทุงุก
4. ุฑุงุฌุน Table Editor ูู Supabase

**ุฃุฎุทุงุก ุดุงุฆุนุฉ:**
- โ `relation does not exist` โ ูู ูุชู ุชุทุจูู SQL
- โ `permission denied` โ ูุดููุฉ ูู RLS
- โ `user_id is null` โ ูู ูุชู ุชุณุฌูู ุงูุฏุฎูู

---

## โ **ุชู ุงูุชูุนูู ุจูุฌุงุญ ุนูุฏูุง:**

โ ุงูุฌุฏููุงู `course_comments` ู `book_comments` ููุฌูุฏุงู
โ ุชุณุชุทูุน ุฅุถุงูุฉ ุชุนููู
โ ุงูุชุนููู ูุธูุฑ ููุฑุงู
โ ุชุณุชุทูุน ุญุฐู ุชุนูููู ููุท

---

**๐ ุงูุขู ูุธุงู ุงูุชุนูููุงุช ุฌุงูุฒ ููุงุณุชุฎุฏุงู! ุงุณุชูุชุน!**
