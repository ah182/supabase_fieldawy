# ๐ ูุธุงู ุนุฏุงุฏ ุงููุดุงูุฏุงุช ูููุณุชูุฒูุงุช ุงูุจูุทุฑูุฉ ุชู ุชุทุจููู ุจูุฌุงุญ!

## ๐ **ููุฎุต ูุง ุชู ุชูููุฐู:**

### โ **1. ุชุญุฏูุซ Provider (`lib/features/vet_supplies/application/vet_supplies_provider.dart`)**
- ุฅุถุงูุฉ ูุธุงู ุชุชุจุน `final Set<String> _viewedSupplies = <String>{};`
- ุชุญุฏูุซ ุฏุงูุฉ `incrementViews()` ูุชุฌูุจ ุงูุนุฏ ุงููุชูุฑุฑ
- ุชุญุฏูุซ ููุฑู ููุญุงูุฉ ุงููุญููุฉ ุนูุฏ ุฒูุงุฏุฉ ุงููุดุงูุฏุงุช

### โ **2. ุชุญุฏูุซ ุงูุดุงุดุฉ (`lib/features/vet_supplies/presentation/screens/vet_supplies_screen.dart`)**
- ุฅุถุงูุฉ `import 'package:visibility_detector/visibility_detector.dart'`
- ุชุญููู `_SupplyCard` ูู `StatelessWidget` ุฅูู `ConsumerStatefulWidget`
- ุฅุถุงูุฉ `VisibilityDetector` ููุฑุงูุจุฉ ุธููุฑ ุงููุงุฑุช
- ุฅุถุงูุฉ `_handleVisibilityChanged()` ูุญุณุงุจ ุงููุดุงูุฏุงุช ุนูุฏ ุธููุฑ ุงููุงุฑุช
- ุชุญุฏูุซ ุฌููุน ุงููุฑุงุฌุน ูุชุณุชุฎุฏู `widget.supply`

---

## ๐ฏ **ุงูููุงุฑูุฉ: ูุจู ูุจุนุฏ ุงูุชุญุฏูุซ**

### **โ ุงููุธุงู ุงูุณุงุจู:**
```dart
// ุงููุดุงูุฏุงุช ุชุฒูุฏ ููุท ุนูุฏ ุงูููุฑ ุนูู ุฒุฑ "ุชูุงุตู ูุน ุงูุจุงุฆุน"
ElevatedButton.icon(
  onPressed: () {
    ref.read(allVetSuppliesNotifierProvider.notifier).incrementViews(supply.id);
    // ุซู ูุชุญ WhatsApp
  },
)
```

### **โ ุงููุธุงู ุงูุฌุฏูุฏ:**
```dart
// ุงููุดุงูุฏุงุช ุชุฒูุฏ ุชููุงุฆูุงู ุนูุฏ ุธููุฑ ุงููุงุฑุช ุนูู ุงูุดุงุดุฉ
VisibilityDetector(
  key: Key('supply_card_${widget.supply.id}'),
  onVisibilityChanged: _handleVisibilityChanged,
  child: Card(...)
)

void _handleVisibilityChanged(VisibilityInfo info) {
  if (info.visibleFraction > 0.5 && !_hasBeenViewed) {
    _hasBeenViewed = true;
    ref.read(allVetSuppliesNotifierProvider.notifier).incrementViews(widget.supply.id);
  }
}
```

---

## ๐ **ุงููุธุงู ุงูููุญุฏ ุงูุขู:**

| ุงูููุฒุฉ | ุงููุธุงุฆู | ุงููุณุชูุฒูุงุช | ุงูุญุงูุฉ |
|--------|---------|-------------|---------|
| **ุนุฏุงุฏ ุงููุดุงูุฏุงุช** | โ | โ | ูุชุทุงุจู |
| **VisibilityDetector** | โ | โ | ูุชุทุงุจู |
| **ุชุญุฏูุซ ุนูุฏ ุงูุธููุฑ** | โ | โ | ูุชุทุงุจู |
| **ุญูุงูุฉ ูู ุงูุชูุฑุงุฑ** | โ | โ | ูุชุทุงุจู |
| **ุชุญุฏูุซ ููุฑู ูููุงุฌูุฉ** | โ | โ | ูุชุทุงุจู |
| **SQL Function** | โ | โ | ูุชุทุงุจู |

---

## ๐ฏ **ููู ูุนูู ุงููุธุงู ุงูุฌุฏูุฏ:**

### **๐ฑ ูููุณุชูุฒูุงุช ุงูุจูุทุฑูุฉ:**
1. ุงููุณุชุฎุฏู ููุชุญ ุตูุญุฉ ุงููุณุชูุฒูุงุช
2. `GridView` ูุนุฑุถ ูุงุฑุชุงุช ุงููุณุชูุฒูุงุช
3. ุนูุฏ ุธููุฑ ูุงุฑุช ูุณุชูุฒู ุฃูุซุฑ ูู 50% โ `VisibilityDetector` ููุชุดู
4. ูุชู ุงุณุชุฏุนุงุก `incrementViews()` ูุน ุญูุงูุฉ ูู ุงูุชูุฑุงุฑ
5. ุงูุนุฏุงุฏ ูุญุฏุซ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช ููู ุงููุงุฌูุฉ ููุฑุงู
6. ููุณ ุงููุณุชูุฒู ูู ููุนุฏ ูุฑุฉ ุฃุฎุฑู ูู ููุณ ุงูุฌูุณุฉ

### **๐จ ุนุฑุถ ุงููุงุฑุช ุงููุญุฏุซ:**
```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ [๐ท ุตูุฑุฉ ุงููุณุชูุฒู]                  โ
โ                                     โ
โ ูุญุงูู ุจูุทุฑูุฉ                        โ
โ ๐ค ุฏ. ุฃุญูุฏ ูุญูุฏ                    โ
โ                                     โ
โ 25.00 EGP          ๐ 15            โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

---

## ๐ง **ุงูุชุญุฏูุซุงุช ุงููุทุจูุฉ:**

### **1. Provider ุงููุญุฏุซ:**
- โ ูุธุงู ุชุชุจุน `_viewedSupplies` 
- โ ุญูุงูุฉ ูู ุงูุนุฏ ุงููุชูุฑุฑ
- โ ุชุญุฏูุซ ูุญูู ููุฑู

### **2. ุงูุดุงุดุฉ ุงููุญุฏุซุฉ:**
- โ `ConsumerStatefulWidget` ุจุฏูุงู ูู `StatelessWidget`
- โ `VisibilityDetector` ุญูู ูู ูุงุฑุช
- โ ูุนุงูุฌ `_handleVisibilityChanged`
- โ ุฌููุน ุงููุฑุงุฌุน ุชุณุชุฎุฏู `widget.supply`

### **3. ุงูุณููู ุงูุฌุฏูุฏ:**
- โ ุญุณุงุจ ุงููุดุงูุฏุงุช **ุนูุฏ ุงูุธููุฑ** ุจุฏูุงู ูู ุงูููุฑ
- โ ููุณ ุทุฑููุฉ ุนูู ุงููุธุงุฆู ุชูุงูุงู
- โ ุชุฌุฑุจุฉ ูุณุชุฎุฏู ููุญุฏุฉ ููุชุณูุฉ

---

## ๐ **ุงููุชูุฌุฉ ุงูููุงุฆูุฉ:**

ุงูุขู ูู ูู **ุงููุธุงุฆู** ู **ุงููุณุชูุฒูุงุช ุงูุจูุทุฑูุฉ** ูุนููุงู ุจููุณ ุงูุทุฑููุฉ:

- **ุนุฏุงุฏ ุงููุดุงูุฏุงุช** ูุธูุฑ ูู ูู ูุงุฑุช
- **ุงููุดุงูุฏุงุช ุชุฒูุฏ ุชููุงุฆูุงู** ุนูุฏ ุธููุฑ ุงููุงุฑุช ุนูู ุงูุดุงุดุฉ
- **ุญูุงูุฉ ูู ุงูุชูุฑุงุฑ** - ููุณ ุงูุนูุตุฑ ูู ููุนุฏ ุฃูุซุฑ ูู ูุฑุฉ
- **ุชุญุฏูุซ ููุฑู** ูู ุงููุงุฌูุฉ ูุงููุงุนุฏุฉ
- **ูุธุงู ููุญุฏ ููุชุณู** ุนุจุฑ ุงูุชุทุจูู

## ๐ฏ **ููุงุฎุชุจุงุฑ:**
1. ุงูุชุญ ุตูุญุฉ ุงููุณุชูุฒูุงุช ุงูุจูุทุฑูุฉ
2. ูุฑุฑ ุจูู ุงููุณุชูุฒูุงุช ูู ุงูู GridView
3. ุณุชุฌุฏ ุนุฏุงุฏ ุงููุดุงูุฏุงุช ูุฒูุฏ ุชููุงุฆูุงู ููู ูุณุชูุฒู ูุธูุฑ ุนูู ุงูุดุงุดุฉ
4. ููุณ ุงููุณุชูุฒู ูู ููุนุฏ ูุฑุฉ ุฃุฎุฑู ูู ููุณ ุงูุฌูุณุฉ

ุงููุธุงู ุงูุขู **ููุญุฏ ููุชูุงูู** ุนุจุฑ ุงูุชุทุจูู! ๐