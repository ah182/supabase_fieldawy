# ๐ ุฏููู ุฅุนุฏุงุฏ ูุธุงู ุชุญุฏูุฏ ูููุน ุงูุนูุงุฏุงุช

## ูุธุฑุฉ ุนุงูุฉ

ุชู ุฅุถุงูุฉ ูุธุงู ูุงูู ูุชุญุฏูุฏ ูููุน ุงูุนูุงุฏุงุช ุงูุฎุงุต ุจุงูุฃุทุจุงุก ุงูุจูุทุฑููู ูุน ุงูููุฒุงุช ุงูุชุงููุฉ:

โ **ููุฃุทุจุงุก:**
- ุทูุจ ุชููุงุฆู ูููููุน ุนูุฏ ุฃูู ุชุณุฌูู ุฏุฎูู
- ุฒุฑ ุชุญุฏูุซ ุงููููุน ูู ุตูุญุฉ ุงูุฅุนุฏุงุฏุงุช
- ุญูุธ ูููุน ุงูุนูุงุฏุฉ ุชููุงุฆูุงู ูุน ุงูุนููุงู ูุฑูู ุงููุงุชู

โ **ูุฌููุน ุงููุณุชุฎุฏููู:**
- ุนุฑุถ ุฌููุน ุงูุนูุงุฏุงุช ุนูู ุฎุฑูุทุฉ ุชูุงุนููุฉ (OpenStreetMap)
- ูุนูููุงุช ุชูุตูููุฉ ููู ุนูุงุฏุฉ (ุงูุงุณูุ ุงูุนููุงูุ ุงููุงุชูุ ูุงุชุณุงุจ)
- ุฅููุงููุฉ ุงูุญุตูู ุนูู ุงูุงุชุฌุงูุงุช

๐ **ูุฌุงูู ุชูุงูุงู**: ูุณุชุฎุฏู OpenStreetMap - ูุง ุญุงุฌุฉ ูู API key!

---

## ๐ ุฎุทูุงุช ุงูุฅุนุฏุงุฏ

### 1๏ธโฃ ุชุซุจูุช ุงูุญุฒู ุงูุฌุฏูุฏุฉ

ูู ุจุชุดุบูู ุงูุฃูุฑ ุงูุชุงูู ูุชุซุจูุช ุงูุญุฒู ุงููุทููุจุฉ:

```bash
flutter pub get
```

ุงูุญุฒู ุงูุชู ุชู ุฅุถุงูุชูุง:
- `geolocator: ^12.0.0` - ููุญุตูู ุนูู ุงููููุน
- `flutter_map: ^7.0.2` - ูุนุฑุถ ุงูุฎุฑุงุฆุท (OpenStreetMap)
- `latlong2: ^0.9.0` - ููุชุนุงูู ูุน ุงูุฅุญุฏุงุซูุงุช
- `geocoding: ^3.0.0` - ูุชุญููู ุงูุฅุญุฏุงุซูุงุช ุฅูู ุนูุงููู

---

### 2๏ธโฃ ุฅูุดุงุก ุฌุฏูู Clinics ูู Supabase

1. ุงูุชุญ ููุญุฉ ุชุญูู Supabase ุงูุฎุงุตุฉ ุจู
2. ุงุฐูุจ ุฅูู **SQL Editor**
3. ูู ุจุชุดุบูู ุงูููู ุงูุชุงูู:

```
supabase/migrations/20250127_create_clinics_table.sql
```

ุฃู ุงูุณุฎ ูุงูุตู ูุญุชูู ุงูููู ูู SQL Editor ููู ุจุชุดุบููู.

ูุฐุง ุณูููู ุจุฅูุดุงุก:
- โ ุฌุฏูู `clinics` ูุน ุฌููุน ุงูุฃุนูุฏุฉ ุงููุทููุจุฉ
- โ Indexes ููุฃุฏุงุก ุงูุฃูุถู
- โ Row Level Security (RLS) policies
- โ Trigger ูุชุญุฏูุซ `updated_at` ุชููุงุฆูุงู

---

### 3๏ธโฃ ุงูุฃุฐููุงุช (Permissions)

#### โ Android Permissions (ุชู ุฅุถุงูุชูุง ูุณุจูุงู):
- `ACCESS_FINE_LOCATION`
- `ACCESS_COARSE_LOCATION`
- `ACCESS_BACKGROUND_LOCATION`

ุงูููู: `android/app/src/main/AndroidManifest.xml`

#### โ iOS Permissions (ุชู ุฅุถุงูุชูุง ูุณุจูุงู):
- `NSLocationWhenInUseUsageDescription`
- `NSLocationAlwaysAndWhenInUseUsageDescription`
- `NSLocationAlwaysUsageDescription`

ุงูููู: `ios/Runner/Info.plist`

**ููุงุญุธุฉ:** ุฅุฐุง ูู ูุชู ุฅุถุงูุฉ ุฃุฐููุงุช iOS ุชููุงุฆูุงูุ ุฑุงุฌุน ุงูููู `IOS_PERMISSIONS_SETUP.md`

---

## ๐ ููููุฉ ุงูุงุณุชุฎุฏุงู

### ููุฃุทุจุงุก:

#### **1. ุนูุฏ ุฃูู ุชุณุฌูู ุฏุฎูู:**
- ุณูุธูุฑ ุชููุงุฆูุงู ูุฑุจุน ุญูุงุฑ ูุทูุจ ุงูุฅุฐู ุจุชุญุฏูุฏ ูููุน ุงูุนูุงุฏุฉ
- ุนูุฏ ุงูููุงููุฉุ ุณูุชู ุญูุธ ุงููููุน ุชููุงุฆูุงู ูุน ุงูุนููุงู

#### **2. ุชุญุฏูุซ ุงููููุน ูุงุญูุงู:**
- ุงุฐูุจ ุฅูู **ุงูุฅุนุฏุงุฏุงุช**
- ูู ูุณู "ูููุน ุงูุนูุงุฏุฉ"
- ุงุถุบุท ุนูู **"ุชุญุฏูุซ ูููุน ุงูุนูุงุฏุฉ"**
- ูุงูู ุนูู ุงูุฃุฐููุงุช ูุณูุชู ุชุญุฏูุซ ุงููููุน

---

### ูุฌููุน ุงููุณุชุฎุฏููู:

#### **ุนุฑุถ ุฎุฑูุทุฉ ุงูุนูุงุฏุงุช:**

1. ุงุฐูุจ ุฅูู **ุงูุฅุนุฏุงุฏุงุช**
2. ูู ูุณู "ุงูุฎุฏูุงุช"
3. ุงุถุบุท ุนูู **"ุฎุฑูุทุฉ ุงูุนูุงุฏุงุช"**

ุฃู ูููู ุฅุถุงูุฉ ุฑุงุจุท ูู ุงููุงุฆูุฉ ุงูุฑุฆูุณูุฉ (Menu) ุญุณุจ ุงูุญุงุฌุฉ.

#### **ูู ุดุงุดุฉ ุงูุฎุฑูุทุฉ:**
- ๐บ๏ธ ุดุงูุฏ ุฌููุน ุงูุนูุงุฏุงุช ุนูู ุงูุฎุฑูุทุฉ
- ๐ ุงุถุบุท ุนูู ุฃู ุนูุงูุฉ (marker) ูุนุฑุถ ูุนูููุงุช ุงูุนูุงุฏุฉ
- ๐ ุงุทูุน ุนูู ุฑูู ุงููุงุชู ููุงุชุณุงุจ
- ๐งญ ุงุญุตู ุนูู ุงูุงุชุฌุงูุงุช ููุนูุงุฏุฉ

---

## ๐ ุงููููุงุช ุงูุชู ุชู ุฅุถุงูุชูุง

### Domain (Models):
- `lib/features/clinics/domain/clinic_model.dart`

### Data (Repository):
- `lib/features/clinics/data/clinic_repository.dart`

### Presentation (UI):
- `lib/features/clinics/presentation/screens/clinics_map_screen.dart`
- `lib/features/clinics/presentation/widgets/location_permission_dialog.dart`

### Core Services:
- `lib/core/services/location_service.dart`

### Database:
- `supabase/migrations/20250127_create_clinics_table.sql`

### Configuration:
- ุชุญุฏูุซุงุช ูู `pubspec.yaml`
- ุชุญุฏูุซุงุช ูู `android/app/src/main/AndroidManifest.xml`
- ุชุญุฏูุซุงุช ูู `ios/Runner/Info.plist`
- ุชุญุฏูุซุงุช ูู `lib/features/authentication/presentation/screens/auth_gate.dart`
- ุชุญุฏูุซุงุช ูู `lib/features/settings/presentation/screens/settings_screen.dart`

---

## ๐ง ุงุณุชูุดุงู ุงูุฃุฎุทุงุก

### **ุงููุดููุฉ:** ุงูุฎุฑูุทุฉ ูุง ุชุธูุฑ
**ุงูุญู:**
1. ุชุญูู ูู ูุฌูุฏ ุฅูุชุฑูุช ูุดุท
2. ุชุฃูุฏ ูู ุฃู ุชุทุจููู ูุฏูู ุฅุฐู ูููุตูู ููุฅูุชุฑูุช
3. ุฌุฑูุจ ุฅุนุงุฏุฉ ุชุดุบูู ุงูุชุทุจูู

### **ุงููุดููุฉ:** ูุง ูุชู ุทูุจ ุฃุฐููุงุช ุงููููุน
**ุงูุญู:**
1. ุชุฃูุฏ ูู ุฅุถุงูุฉ ุงูุฃุฐููุงุช ูู AndroidManifest.xml ู Info.plist
2. ุนูู Android 11+ุ ุชุฃูุฏ ูู ููุญ ุงูุฃุฐููุงุช ูู ุฅุนุฏุงุฏุงุช ุงููุธุงู
3. ุฌุฑูุจ ุญุฐู ุงูุชุทุจูู ูุฅุนุงุฏุฉ ุชุซุจูุชู

### **ุงููุดููุฉ:** "Permission denied" ุนูุฏ ุญูุธ ุงููููุน ูู Supabase
**ุงูุญู:**
1. ุชุฃูุฏ ูู ุชุดุบูู SQL migration file ุจุดูู ุตุญูุญ
2. ุชุญูู ูู RLS policies ูู Supabase
3. ุชุฃูุฏ ูู ุฃู ุงููุณุชุฎุฏู ูุณุฌู ุฏุฎูู ูุฏูุฑู "doctor"

### **ุงููุดููุฉ:** ุงูุนููุงู ูุง ูุธูุฑ
**ุงูุญู:**
1. ุชุญูู ูู ูุฌูุฏ ุงุชุตุงู ุฅูุชุฑูุช ูุดุท
2. ุจุนุถ ุงูููุงูุน ุงููุงุฆูุฉ ูุฏ ูุง ูุชููุฑ ููุง ุนูุงููู ุฏูููุฉ
3. ุฎุฏูุฉ Geocoding ูุฏ ุชุฃุฎุฐ ุจุนุถ ุงูููุช

---

## ๐ ุจููุฉ ูุงุนุฏุฉ ุงูุจูุงูุงุช

### ุฌุฏูู `clinics`:

| Column | Type | Description |
|--------|------|-------------|
| `id` | UUID | Primary key |
| `user_id` | UUID | Foreign key ุฅูู `auth.users` |
| `clinic_name` | TEXT | ุงุณู ุงูุนูุงุฏุฉ (ุนุงุฏุฉ ููุณ ุงุณู ุงูุทุจูุจ) |
| `latitude` | DOUBLE | ุฎุท ุงูุนุฑุถ |
| `longitude` | DOUBLE | ุฎุท ุงูุทูู |
| `address` | TEXT | ุงูุนููุงู (ูู geocoding) |
| `phone_number` | TEXT | ุฑูู ุงููุงุชู |
| `created_at` | TIMESTAMP | ุชุงุฑูุฎ ุงูุฅูุดุงุก |
| `updated_at` | TIMESTAMP | ุชุงุฑูุฎ ุขุฎุฑ ุชุญุฏูุซ |

---

## ๐ ุงูุฃูุงู (RLS Policies)

ุชู ุฅุนุฏุงุฏ ุงูู policies ุงูุชุงููุฉ:

1. **ุงููุฑุงุกุฉ (SELECT):** ุงูุฌููุน ูููููู ุฑุคูุฉ ุฌููุน ุงูุนูุงุฏุงุช
2. **ุงูุฅุถุงูุฉ (INSERT):** ููุท ุงูุฃุทุจุงุก ูููููู ุฅุถุงูุฉ ุนูุงุฏุงุชูู
3. **ุงูุชุญุฏูุซ (UPDATE):** ููุท ุงูุทุจูุจ ููููู ุชุญุฏูุซ ุนูุงุฏุชู ุงูุฎุงุตุฉ
4. **ุงูุญุฐู (DELETE):** ููุท ุงูุทุจูุจ ููููู ุญุฐู ุนูุงุฏุชู ุงูุฎุงุตุฉ
5. **ุงูุฃุฏูู:** ูู ุตูุงุญูุงุช ูุงููุฉ ุนูู ุฌููุน ุงูุนูุงุฏุงุช

---

## ๐ฏ ุงูููุฒุงุช ุงููุณุชูุจููุฉ (ุงุฎุชูุงุฑู)

ููููู ุฅุถุงูุฉ ุงูููุฒุงุช ุงูุชุงููุฉ ูุงุญูุงู:

- [ ] ุชููููุงุช ููุนูุงุฏุงุช
- [ ] ุณุงุนุงุช ุงูุนูู
- [ ] ุตูุฑ ููุนูุงุฏุฉ
- [ ] ุงูุชุฎุตุตุงุช ุงูุจูุทุฑูุฉ
- [ ] ุงูุจุญุซ ุนู ุนูุงุฏุงุช ูุฑูุจุฉ
- [ ] ููุชุฑุฉ ุญุณุจ ุงูููุน ุฃู ุงูุชุฎุตุต
- [ ] ุฅุถุงูุฉ ุนุฏุฉ ูุฑูุน ูููุณ ุงูุทุจูุจ

---

## ๐ ุงูุฏุนู

ุฅุฐุง ูุงุฌูุช ุฃู ูุดููุฉ:
1. ุฑุงุฌุน ูุณู ุงุณุชูุดุงู ุงูุฃุฎุทุงุก ุฃุนูุงู
2. ุชุญูู ูู console logs ูู ุงูุชุทุจูู
3. ุฑุงุฌุน Supabase logs ููุชุญูู ูู RLS policies

---

## โ Checklist ููุฅุนุฏุงุฏ

- [ ] ุชุดุบูู `flutter pub get`
- [ ] ุชุดุบูู SQL migration ูู Supabase
- [ ] ุงูุชุญูู ูู ุงูุฃุฐููุงุช ูู AndroidManifest.xml
- [ ] ุงูุชุญูู ูู ุงูุฃุฐููุงุช ูู Info.plist (ุฑุงุฌุน IOS_PERMISSIONS_SETUP.md)
- [ ] ุงุฎุชุจุงุฑ ุทูุจ ุงููููุน ููุทุจูุจ
- [ ] ุงุฎุชุจุงุฑ ุนุฑุถ ุงูุฎุฑูุทุฉ
- [ ] ุงุฎุชุจุงุฑ ุชุญุฏูุซ ุงููููุน ูู ุงูุฅุนุฏุงุฏุงุช

## ๐ ุญูู OpenStreetMap

ูุฐุง ุงูุชุทุจูู ูุณุชุฎุฏู [OpenStreetMap](https://www.openstreetmap.org/) ูุนุฑุถ ุงูุฎุฑุงุฆุท:
- โ ูุฌุงูู ุชูุงูุงู - ูุง ุญุงุฌุฉ ูู API keys
- โ ููุชูุญ ุงููุตุฏุฑ
- โ ุชุญุฏูุซุงุช ูุณุชูุฑุฉ ูู ุงููุฌุชูุน
- โ ูุนูู ุจุฏูู ุญุฏูุฏ ููุงุณุชุฎุฏุงู

**ููุงุญุธุฉ:** OpenStreetMap ูุนุชูุฏ ุนูู ูุณุงููุงุช ุงููุฌุชูุนุ ูุฐุง ูุฏ ุชููู ุจุนุถ ุงูููุงุทู ุงููุงุฆูุฉ ุบูุฑ ููุตูุฉ ููุง ูู ุฎุฑุงุฆุท ุฃุฎุฑู.

---

**ุชู ุจูุฌุงุญ! ๐**

ุงูุขู ุงูุชุทุจูู ุฌุงูุฒ ูุงุณุชุฎุฏุงู ูุธุงู ุชุญุฏูุฏ ูููุน ุงูุนูุงุฏุงุช.
